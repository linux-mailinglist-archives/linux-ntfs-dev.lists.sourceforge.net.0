Return-Path: <linux-ntfs-dev-bounces@lists.sourceforge.net>
X-Original-To: lists+linux-ntfs-dev@lfdr.de
Delivered-To: lists+linux-ntfs-dev@lfdr.de
Received: from lists.sourceforge.net (lists.sourceforge.net [216.105.38.7])
	by mail.lfdr.de (Postfix) with ESMTPS id 52C6E3DB752
	for <lists+linux-ntfs-dev@lfdr.de>; Fri, 30 Jul 2021 12:42:45 +0200 (CEST)
Received: from [127.0.0.1] (helo=sfs-ml-4.v29.lw.sourceforge.com)
	by sfs-ml-4.v29.lw.sourceforge.com with esmtp (Exim 4.90_1)
	(envelope-from <linux-ntfs-dev-bounces@lists.sourceforge.net>)
	id 1m9PyS-0003eR-LR; Fri, 30 Jul 2021 10:42:40 +0000
Received: from [172.30.20.202] (helo=mx.sourceforge.net)
 by sfs-ml-4.v29.lw.sourceforge.com with esmtps
 (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256) (Exim 4.90_1)
 (envelope-from <christophe.jaillet@wanadoo.fr>) id 1m9N8N-00005z-6t
 for linux-ntfs-dev@lists.sourceforge.net; Fri, 30 Jul 2021 07:40:43 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
 d=sourceforge.net; s=x; h=Content-Transfer-Encoding:Content-Type:In-Reply-To:
 MIME-Version:Date:Message-ID:From:References:Cc:To:Subject:Sender:Reply-To:
 Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:
 Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:
 List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=h8QryQmnaeLO4r1p3Gc1ZTLrnPJ1Ml1GGE50A5J0jAk=; b=IyA+Uo2AXH29fZMV+4nT156fdT
 VXqUIcg3ws8fVWDjanohzHkZP8p4/fBT+r+WxKUdac5FVd7lYfgXrxkOC4J7GVkLRdue+b2XwpD/V
 Lh0Xg2IPwIV5sxDmdLkpbJKYZ97SNm8z0O1bRdjUuVVuVSuYTn0ooRPb4TDhF0A6ySuQ=;
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=sf.net; s=x
 ;
 h=Content-Transfer-Encoding:Content-Type:In-Reply-To:MIME-Version:Date:
 Message-ID:From:References:Cc:To:Subject:Sender:Reply-To:Content-ID:
 Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc
 :Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:List-Subscribe:
 List-Post:List-Owner:List-Archive;
 bh=h8QryQmnaeLO4r1p3Gc1ZTLrnPJ1Ml1GGE50A5J0jAk=; b=haiIZgCMA+y6tZotOauUnOnYQ2
 6Qly5ZBc+HKvnGY8gW6Ksufp0CGUJwVrtiGLFaheVRYiMOXZDUU6H1HODx7Ev85Mr++PiFiuxAh9a
 +9KylOVS8xxNMFGSsMdbs18JJEzLWQg+4beZiL0Em+w47W8xlL5EOAcIjbl4pQlFBKw8=;
Received: from smtp05.smtpout.orange.fr ([80.12.242.127]
 helo=smtp.smtpout.orange.fr)
 by sfi-mx-1.v28.lw.sourceforge.com with esmtps (TLSv1:DHE-RSA-AES128-SHA:128)
 (Exim 4.92.3) id 1m9N8D-007Vj5-RW
 for linux-ntfs-dev@lists.sourceforge.net; Fri, 30 Jul 2021 07:40:43 +0000
Received: from [10.0.2.15] ([86.243.172.93]) by mwinf5d81 with ME
 id bKgS2500121Fzsu03KgSa2; Fri, 30 Jul 2021 09:40:26 +0200
X-ME-Helo: [10.0.2.15]
X-ME-Auth: Y2hyaXN0b3BoZS5qYWlsbGV0QHdhbmFkb28uZnI=
X-ME-Date: Fri, 30 Jul 2021 09:40:26 +0200
X-ME-IP: 86.243.172.93
To: Konstantin Komarov <almaz.alexandrovich@paragon-software.com>,
 linux-fsdevel@vger.kernel.org
References: <20210729134943.778917-1-almaz.alexandrovich@paragon-software.com>
 <20210729134943.778917-5-almaz.alexandrovich@paragon-software.com>
From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Message-ID: <27fe7136-c929-a1a1-9ec6-20c051a34b3b@wanadoo.fr>
Date: Fri, 30 Jul 2021 09:40:26 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.8.1
MIME-Version: 1.0
In-Reply-To: <20210729134943.778917-5-almaz.alexandrovich@paragon-software.com>
Content-Language: en-US
X-Spam-Score: 0.0 (/)
X-Spam-Report: Spam Filtering performed by mx.sourceforge.net.
 See http://spamassassin.org/tag/ for more details.
 0.0 URIBL_BLOCKED ADMINISTRATOR NOTICE: The query to URIBL was blocked.
 See
 http://wiki.apache.org/spamassassin/DnsBlocklists#dnsbl-block
 for more information. [URIs: paragon-software.com]
 -0.0 RCVD_IN_MSPIKE_H2      RBL: Average reputation (+2)
 [80.12.242.127 listed in wl.mailspike.net]
 -0.0 RCVD_IN_DNSWL_NONE     RBL: Sender listed at https://www.dnswl.org/, no
 trust [80.12.242.127 listed in list.dnswl.org]
 0.0 SPF_NONE               SPF: sender does not publish an SPF Record
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.0 NICE_REPLY_A           Looks like a legit reply (A)
X-Headers-End: 1m9N8D-007Vj5-RW
X-Mailman-Approved-At: Fri, 30 Jul 2021 10:42:38 +0000
Subject: Re: [Linux-NTFS-Dev] [PATCH v27 04/10] fs/ntfs3: Add file
 operations and implementation
X-BeenThere: linux-ntfs-dev@lists.sourceforge.net
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: "Discussion related to Linux NTFS development."
 <linux-ntfs-dev.lists.sourceforge.net>
List-Unsubscribe: <https://lists.sourceforge.net/lists/options/linux-ntfs-dev>, 
 <mailto:linux-ntfs-dev-request@lists.sourceforge.net?subject=unsubscribe>
List-Archive: <http://sourceforge.net/mailarchive/forum.php?forum_name=linux-ntfs-dev>
List-Post: <mailto:linux-ntfs-dev@lists.sourceforge.net>
List-Help: <mailto:linux-ntfs-dev-request@lists.sourceforge.net?subject=help>
List-Subscribe: <https://lists.sourceforge.net/lists/listinfo/linux-ntfs-dev>, 
 <mailto:linux-ntfs-dev-request@lists.sourceforge.net?subject=subscribe>
Cc: andy.lavr@gmail.com, kari.argillander@gmail.com, nborisov@suse.com,
 linux-kernel@vger.kernel.org, oleksandr@natalenko.name, rdunlap@infradead.org,
 aaptel@suse.com, willy@infradead.org, dsterba@suse.cz, ebiggers@kernel.org,
 linux-ntfs-dev@lists.sourceforge.net, hch@lst.de, viro@zeniv.linux.org.uk,
 joe@perches.com, dan.carpenter@oracle.com, pali@kernel.org, mark@harmstone.com,
 anton@tuxera.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: linux-ntfs-dev-bounces@lists.sourceforge.net

TGUgMjkvMDcvMjAyMSDDoCAxNTo0OSwgS29uc3RhbnRpbiBLb21hcm92IGEgw6ljcml0wqA6Cj4g
VGhpcyBhZGRzIGZpbGUgb3BlcmF0aW9ucyBhbmQgaW1wbGVtZW50YXRpb24KPiAKPiBTaWduZWQt
b2ZmLWJ5OiBLb25zdGFudGluIEtvbWFyb3YgPGFsbWF6LmFsZXhhbmRyb3ZpY2hAcGFyYWdvbi1z
b2Z0d2FyZS5jb20+Cj4gLS0tCj4gICBmcy9udGZzMy9kaXIuYyAgICAgfCAgNTk0ICsrKysrKysr
Kwo+ICAgZnMvbnRmczMvZmlsZS5jICAgIHwgMTEzMCArKysrKysrKysrKysrKysrCj4gICBmcy9u
dGZzMy9mcmVjb3JkLmMgfCAzMDcxICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrCj4gICBmcy9udGZzMy9uYW1laS5jICAgfCAgNTc4ICsrKysrKysrKwo+ICAgZnMv
bnRmczMvcmVjb3JkLmMgIHwgIDYwOSArKysrKysrKysKPiAgIGZzL250ZnMzL3J1bi5jICAgICB8
IDExMTEgKysrKysrKysrKysrKysrKwo+ICAgNiBmaWxlcyBjaGFuZ2VkLCA3MDkzIGluc2VydGlv
bnMoKykKPiAgIGNyZWF0ZSBtb2RlIDEwMDY0NCBmcy9udGZzMy9kaXIuYwo+ICAgY3JlYXRlIG1v
ZGUgMTAwNjQ0IGZzL250ZnMzL2ZpbGUuYwo+ICAgY3JlYXRlIG1vZGUgMTAwNjQ0IGZzL250ZnMz
L2ZyZWNvcmQuYwo+ICAgY3JlYXRlIG1vZGUgMTAwNjQ0IGZzL250ZnMzL25hbWVpLmMKPiAgIGNy
ZWF0ZSBtb2RlIDEwMDY0NCBmcy9udGZzMy9yZWNvcmQuYwo+ICAgY3JlYXRlIG1vZGUgMTAwNjQ0
IGZzL250ZnMzL3J1bi5jCj4gCgpbLi4uXQoKPiBkaWZmIC0tZ2l0IGEvZnMvbnRmczMvbmFtZWku
YyBiL2ZzL250ZnMzL25hbWVpLmMKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAw
MDAwMC4uZjVkYjEyY2QzCj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2ZzL250ZnMzL25hbWVpLmMK
ClsuLi5dCgo+ICsvKgo+ICsgKiBudGZzX3JlbmFtZQo+ICsgKgo+ICsgKiBpbm9kZV9vcGVyYXRp
b25zOjpyZW5hbWUKPiArICovCj4gK3N0YXRpYyBpbnQgbnRmc19yZW5hbWUoc3RydWN0IHVzZXJf
bmFtZXNwYWNlICptbnRfdXNlcm5zLCBzdHJ1Y3QgaW5vZGUgKm9sZF9kaXIsCj4gKwkJICAgICAg
IHN0cnVjdCBkZW50cnkgKm9sZF9kZW50cnksIHN0cnVjdCBpbm9kZSAqbmV3X2RpciwKPiArCQkg
ICAgICAgc3RydWN0IGRlbnRyeSAqbmV3X2RlbnRyeSwgdTMyIGZsYWdzKQo+ICt7Cj4gKwlpbnQg
ZXJyOwo+ICsJc3RydWN0IHN1cGVyX2Jsb2NrICpzYiA9IG9sZF9kaXItPmlfc2I7Cj4gKwlzdHJ1
Y3QgbnRmc19zYl9pbmZvICpzYmkgPSBzYi0+c19mc19pbmZvOwo+ICsJc3RydWN0IG50ZnNfaW5v
ZGUgKm9sZF9kaXJfbmkgPSBudGZzX2kob2xkX2Rpcik7Cj4gKwlzdHJ1Y3QgbnRmc19pbm9kZSAq
bmV3X2Rpcl9uaSA9IG50ZnNfaShuZXdfZGlyKTsKPiArCXN0cnVjdCBudGZzX2lub2RlICpvbGRf
bmk7Cj4gKwlzdHJ1Y3QgQVRUUl9GSUxFX05BTUUgKm9sZF9uYW1lLCAqbmV3X25hbWUsICpmbmFt
ZTsKPiArCXU4IG5hbWVfdHlwZTsKPiArCWJvb2wgaXNfc2FtZTsKPiArCXN0cnVjdCBpbm9kZSAq
b2xkX2lub2RlLCAqbmV3X2lub2RlOwo+ICsJc3RydWN0IE5URlNfREUgKm9sZF9kZSwgKm5ld19k
ZTsKPiArCXN0cnVjdCBBVFRSSUIgKmF0dHI7Cj4gKwlzdHJ1Y3QgQVRUUl9MSVNUX0VOVFJZICps
ZTsKPiArCXUxNiBuZXdfZGVfa2V5X3NpemU7Cj4gKwo+ICsJc3RhdGljX2Fzc2VydChTSVpFT0Zf
QVRUUklCVVRFX0ZJTEVOQU1FX01BWCArIFNJWkVPRl9SRVNJREVOVCA8IDEwMjQpOwo+ICsJc3Rh
dGljX2Fzc2VydChTSVpFT0ZfQVRUUklCVVRFX0ZJTEVOQU1FX01BWCArIHNpemVvZihzdHJ1Y3Qg
TlRGU19ERSkgPAo+ICsJCSAgICAgIDEwMjQpOwo+ICsJc3RhdGljX2Fzc2VydChQQVRIX01BWCA+
PSA0ICogMTAyNCk7Cj4gKwo+ICsJaWYgKGZsYWdzICYgflJFTkFNRV9OT1JFUExBQ0UpCj4gKwkJ
cmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsJb2xkX2lub2RlID0gZF9pbm9kZShvbGRfZGVudHJ5KTsK
PiArCW5ld19pbm9kZSA9IGRfaW5vZGUobmV3X2RlbnRyeSk7Cj4gKwo+ICsJb2xkX25pID0gbnRm
c19pKG9sZF9pbm9kZSk7Cj4gKwo+ICsJaXNfc2FtZSA9IG9sZF9kZW50cnktPmRfbmFtZS5sZW4g
PT0gbmV3X2RlbnRyeS0+ZF9uYW1lLmxlbiAmJgo+ICsJCSAgIW1lbWNtcChvbGRfZGVudHJ5LT5k
X25hbWUubmFtZSwgbmV3X2RlbnRyeS0+ZF9uYW1lLm5hbWUsCj4gKwkJCSAgb2xkX2RlbnRyeS0+
ZF9uYW1lLmxlbik7Cj4gKwo+ICsJaWYgKGlzX3NhbWUgJiYgb2xkX2RpciA9PSBuZXdfZGlyKSB7
Cj4gKwkJLyogTm90aGluZyB0byBkbyAqLwo+ICsJCWVyciA9IDA7Cj4gKwkJZ290byBvdXQ7Cj4g
Kwl9Cj4gKwo+ICsJaWYgKG50ZnNfaXNfbWV0YV9maWxlKHNiaSwgb2xkX2lub2RlLT5pX2lubykp
IHsKPiArCQllcnIgPSAtRUlOVkFMOwo+ICsJCWdvdG8gb3V0Owo+ICsJfQo+ICsKPiArCWlmIChu
ZXdfaW5vZGUpIHsKPiArCQkvKnRhcmdldCBuYW1lIGV4aXN0cy4gdW5saW5rIGl0Ki8KPiArCQlk
Z2V0KG5ld19kZW50cnkpOwo+ICsJCW5pX2xvY2tfZGlyKG5ld19kaXJfbmkpOwo+ICsJCWVyciA9
IG50ZnNfdW5saW5rX2lub2RlKG5ld19kaXIsIG5ld19kZW50cnkpOwo+ICsJCW5pX3VubG9jayhu
ZXdfZGlyX25pKTsKPiArCQlkcHV0KG5ld19kZW50cnkpOwo+ICsJCWlmIChlcnIpCj4gKwkJCWdv
dG8gb3V0Owo+ICsJfQo+ICsKPiArCS8qIGFsbG9jYXRlIFBBVEhfTUFYIGJ5dGVzICovCj4gKwlv
bGRfZGUgPSBfX2dldG5hbWUoKTsKPiArCWlmICghb2xkX2RlKSB7Cj4gKwkJZXJyID0gLUVOT01F
TTsKPiArCQlnb3RvIG91dDsKPiArCX0KPiArCj4gKwllcnIgPSBmaWxsX25hbWVfZGUoc2JpLCBv
bGRfZGUsICZvbGRfZGVudHJ5LT5kX25hbWUsIE5VTEwpOwo+ICsJaWYgKGVyciA8IDApCj4gKwkJ
Z290byBvdXQxOwo+ICsKPiArCW9sZF9uYW1lID0gKHN0cnVjdCBBVFRSX0ZJTEVfTkFNRSAqKShv
bGRfZGUgKyAxKTsKPiArCj4gKwlpZiAoaXNfc2FtZSkgewo+ICsJCW5ld19kZSA9IG9sZF9kZTsK
PiArCX0gZWxzZSB7Cj4gKwkJbmV3X2RlID0gQWRkMlB0cihvbGRfZGUsIDEwMjQpOwo+ICsJCWVy
ciA9IGZpbGxfbmFtZV9kZShzYmksIG5ld19kZSwgJm5ld19kZW50cnktPmRfbmFtZSwgTlVMTCk7
Cj4gKwkJaWYgKGVyciA8IDApCj4gKwkJCWdvdG8gb3V0MTsKPiArCX0KPiArCj4gKwluaV9sb2Nr
X2RpcihvbGRfZGlyX25pKTsKPiArCW5pX2xvY2sob2xkX25pKTsKPiArCj4gKwltaV9nZXRfcmVm
KCZvbGRfZGlyX25pLT5taSwgJm9sZF9uYW1lLT5ob21lKTsKPiArCj4gKwkvKmdldCBwb2ludGVy
IHRvIGZpbGVfbmFtZSBpbiBtZnQqLwo+ICsJZm5hbWUgPSBuaV9mbmFtZV9uYW1lKG9sZF9uaSwg
KHN0cnVjdCBjcHVfc3RyICopJm9sZF9uYW1lLT5uYW1lX2xlbiwKPiArCQkJICAgICAgJm9sZF9u
YW1lLT5ob21lLCAmbGUpOwo+ICsJaWYgKCFmbmFtZSkgewo+ICsJCWVyciA9IC1FSU5WQUw7Cj4g
KwkJZ290byBvdXQyOwo+ICsJfQo+ICsKPiArCS8qIENvcHkgZm5hbWUgaW5mbyBmcm9tIHJlY29y
ZCBpbnRvIG5ldyBmbmFtZSAqLwo+ICsJbmV3X25hbWUgPSAoc3RydWN0IEFUVFJfRklMRV9OQU1F
ICopKG5ld19kZSArIDEpOwo+ICsJbWVtY3B5KCZuZXdfbmFtZS0+ZHVwLCAmZm5hbWUtPmR1cCwg
c2l6ZW9mKGZuYW1lLT5kdXApKTsKPiArCj4gKwluYW1lX3R5cGUgPSBwYWlyZWRfbmFtZShmbmFt
ZS0+dHlwZSk7Cj4gKwo+ICsJLyogcmVtb3ZlIGZpcnN0IG5hbWUgZnJvbSBkaXJlY3RvcnkgKi8K
PiArCWVyciA9IGluZHhfZGVsZXRlX2VudHJ5KCZvbGRfZGlyX25pLT5kaXIsIG9sZF9kaXJfbmks
IG9sZF9kZSArIDEsCj4gKwkJCQlsZTE2X3RvX2NwdShvbGRfZGUtPmtleV9zaXplKSwgc2JpKTsK
PiArCWlmIChlcnIpCj4gKwkJZ290byBvdXQzOwo+ICsKPiArCS8qIHJlbW92ZSBmaXJzdCBuYW1l
IGZyb20gbWZ0ICovCj4gKwllcnIgPSBuaV9yZW1vdmVfYXR0cl9sZShvbGRfbmksIGF0dHJfZnJv
bV9uYW1lKGZuYW1lKSwgbGUpOwo+ICsJaWYgKGVycikKPiArCQlnb3RvIG91dDQ7Cj4gKwo+ICsJ
bGUxNl9hZGRfY3B1KCZvbGRfbmktPm1pLm1yZWMtPmhhcmRfbGlua3MsIC0xKTsKPiArCW9sZF9u
aS0+bWkuZGlydHkgPSB0cnVlOwo+ICsKPiArCWlmIChuYW1lX3R5cGUgIT0gRklMRV9OQU1FX1BP
U0lYKSB7Cj4gKwkJLyogZ2V0IHBhaXJlZCBuYW1lICovCj4gKwkJZm5hbWUgPSBuaV9mbmFtZV90
eXBlKG9sZF9uaSwgbmFtZV90eXBlLCAmbGUpOwo+ICsJCWlmIChmbmFtZSkgewo+ICsJCQkvKiBy
ZW1vdmUgc2Vjb25kIG5hbWUgZnJvbSBkaXJlY3RvcnkgKi8KPiArCQkJZXJyID0gaW5keF9kZWxl
dGVfZW50cnkoJm9sZF9kaXJfbmktPmRpciwgb2xkX2Rpcl9uaSwKPiArCQkJCQkJZm5hbWUsIGZu
YW1lX2Z1bGxfc2l6ZShmbmFtZSksCj4gKwkJCQkJCXNiaSk7Cj4gKwkJCWlmIChlcnIpCj4gKwkJ
CQlnb3RvIG91dDU7Cj4gKwo+ICsJCQkvKiByZW1vdmUgc2Vjb25kIG5hbWUgZnJvbSBtZnQgKi8K
PiArCQkJZXJyID0gbmlfcmVtb3ZlX2F0dHJfbGUob2xkX25pLCBhdHRyX2Zyb21fbmFtZShmbmFt
ZSksCj4gKwkJCQkJCWxlKTsKPiArCQkJaWYgKGVycikKPiArCQkJCWdvdG8gb3V0NjsKPiArCj4g
KwkJCWxlMTZfYWRkX2NwdSgmb2xkX25pLT5taS5tcmVjLT5oYXJkX2xpbmtzLCAtMSk7Cj4gKwkJ
CW9sZF9uaS0+bWkuZGlydHkgPSB0cnVlOwo+ICsJCX0KPiArCX0KPiArCj4gKwkvKiBBZGQgbmV3
IG5hbWUgKi8KPiArCW1pX2dldF9yZWYoJm9sZF9uaS0+bWksICZuZXdfZGUtPnJlZik7Cj4gKwlt
aV9nZXRfcmVmKCZudGZzX2kobmV3X2RpciktPm1pLCAmbmV3X25hbWUtPmhvbWUpOwo+ICsKPiAr
CW5ld19kZV9rZXlfc2l6ZSA9IGxlMTZfdG9fY3B1KG5ld19kZS0+a2V5X3NpemUpOwo+ICsKPiAr
CS8qIGluc2VydCBuZXcgbmFtZSBpbiBtZnQgKi8KPiArCWVyciA9IG5pX2luc2VydF9yZXNpZGVu
dChvbGRfbmksIG5ld19kZV9rZXlfc2l6ZSwgQVRUUl9OQU1FLCBOVUxMLCAwLAo+ICsJCQkJICZh
dHRyLCBOVUxMKTsKPiArCWlmIChlcnIpCj4gKwkJZ290byBvdXQ3Owo+ICsKPiArCWF0dHItPnJl
cy5mbGFncyA9IFJFU0lERU5UX0ZMQUdfSU5ERVhFRDsKPiArCj4gKwltZW1jcHkoQWRkMlB0cihh
dHRyLCBTSVpFT0ZfUkVTSURFTlQpLCBuZXdfbmFtZSwgbmV3X2RlX2tleV9zaXplKTsKPiArCj4g
KwlsZTE2X2FkZF9jcHUoJm9sZF9uaS0+bWkubXJlYy0+aGFyZF9saW5rcywgMSk7Cj4gKwlvbGRf
bmktPm1pLmRpcnR5ID0gdHJ1ZTsKPiArCj4gKwkvKiBpbnNlcnQgbmV3IG5hbWUgaW4gZGlyZWN0
b3J5ICovCj4gKwllcnIgPSBpbmR4X2luc2VydF9lbnRyeSgmbmV3X2Rpcl9uaS0+ZGlyLCBuZXdf
ZGlyX25pLCBuZXdfZGUsIHNiaSwKPiArCQkJCU5VTEwpOwo+ICsJaWYgKGVycikKPiArCQlnb3Rv
IG91dDg7Cj4gKwo+ICsJaWYgKElTX0RJUlNZTkMobmV3X2RpcikpCj4gKwkJZXJyID0gbnRmc19z
eW5jX2lub2RlKG9sZF9pbm9kZSk7CgpUaGlzIHZhbHVlIHJldHVybmVkIGJ5ICdudGZzX3N5bmNf
aW5vZGUoKScgaXMgc2lsZW5jZWQgYmVsb3cuCk1heWJlIHRoZSBzYW1lIHNob3VsZCBiZSBkb25l
IGhlcmU/CkFueXdheSwgdGhpcyAnZXJyJyBpcyBuZXZlciB1c2VkIGFuZCBpcyBmb3JjZWQgdG8g
MCBiZWxvdwoKPiArCWVsc2UKPiArCQltYXJrX2lub2RlX2RpcnR5KG9sZF9pbm9kZSk7Cj4gKwo+
ICsJb2xkX2Rpci0+aV9jdGltZSA9IG9sZF9kaXItPmlfbXRpbWUgPSBjdXJyZW50X3RpbWUob2xk
X2Rpcik7Cj4gKwlpZiAoSVNfRElSU1lOQyhvbGRfZGlyKSkKPiArCQkodm9pZCludGZzX3N5bmNf
aW5vZGUob2xkX2Rpcik7CgpoZXJlCgo+ICsJZWxzZQo+ICsJCW1hcmtfaW5vZGVfZGlydHkob2xk
X2Rpcik7Cj4gKwo+ICsJaWYgKG9sZF9kaXIgIT0gbmV3X2Rpcikgewo+ICsJCW5ld19kaXItPmlf
bXRpbWUgPSBuZXdfZGlyLT5pX2N0aW1lID0gb2xkX2Rpci0+aV9jdGltZTsKPiArCQltYXJrX2lu
b2RlX2RpcnR5KG5ld19kaXIpOwo+ICsJfQo+ICsKPiArCWlmIChvbGRfaW5vZGUpIHsKPiArCQlv
bGRfaW5vZGUtPmlfY3RpbWUgPSBvbGRfZGlyLT5pX2N0aW1lOwo+ICsJCW1hcmtfaW5vZGVfZGly
dHkob2xkX2lub2RlKTsKPiArCX0KPiArCj4gKwllcnIgPSAwOwoKYW5kIGhlcmUuCgo+ICsJLyog
bm9ybWFsIHdheSAqLwo+ICsJZ290byBvdXQyOwo+ICsKPiArb3V0ODoKPiArCS8qIHVuZG8KPiAr
CSAqIG5pX2luc2VydF9yZXNpZGVudChvbGRfbmksIG5ld19kZV9rZXlfc2l6ZSwgQVRUUl9OQU1F
LCBOVUxMLCAwLAo+ICsJICoJCQkgJmF0dHIsIE5VTEwpOwo+ICsJICovCj4gKwltaV9yZW1vdmVf
YXR0cigmb2xkX25pLT5taSwgYXR0cik7Cj4gK291dDc6Cj4gKwkvKiB1bmRvCj4gKwkgKiBuaV9y
ZW1vdmVfYXR0cl9sZShvbGRfbmksIGF0dHJfZnJvbV9uYW1lKGZuYW1lKSwgbGUpOwo+ICsJICov
Cj4gK291dDY6Cj4gKwkvKiB1bmRvCj4gKwkgKiBpbmR4X2RlbGV0ZV9lbnRyeSgmb2xkX2Rpcl9u
aS0+ZGlyLCBvbGRfZGlyX25pLAo+ICsJICoJCQkJCWZuYW1lLCBmbmFtZV9mdWxsX3NpemUoZm5h
bWUpLAo+ICsJICoJCQkJCXNiaSk7Cj4gKwkgKi8KPiArb3V0NToKPiArCS8qIHVuZG8KPiArCSAq
IG5pX3JlbW92ZV9hdHRyX2xlKG9sZF9uaSwgYXR0cl9mcm9tX25hbWUoZm5hbWUpLCBsZSk7Cj4g
KwkgKi8KPiArb3V0NDoKPiArCS8qIHVuZG86Cj4gKwkgKiBpbmR4X2RlbGV0ZV9lbnRyeSgmb2xk
X2Rpcl9uaS0+ZGlyLCBvbGRfZGlyX25pLCBvbGRfZGUgKyAxLAo+ICsJICoJCQlvbGRfZGUtPmtl
eV9zaXplLCBOVUxMKTsKPiArCSAqLwo+ICtvdXQzOgo+ICtvdXQyOgo+ICsJbmlfdW5sb2NrKG9s
ZF9uaSk7Cj4gKwluaV91bmxvY2sob2xkX2Rpcl9uaSk7Cj4gK291dDE6Cj4gKwlfX3B1dG5hbWUo
b2xkX2RlKTsKPiArb3V0Ogo+ICsJcmV0dXJuIGVycjsKPiArfQoKWy4uLl0KCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW51eC1OVEZTLURldiBtYWls
aW5nIGxpc3QKTGludXgtTlRGUy1EZXZAbGlzdHMuc291cmNlZm9yZ2UubmV0Cmh0dHBzOi8vbGlz
dHMuc291cmNlZm9yZ2UubmV0L2xpc3RzL2xpc3RpbmZvL2xpbnV4LW50ZnMtZGV2Cg==
