Return-Path: <linux-ntfs-dev-bounces@lists.sourceforge.net>
X-Original-To: lists+linux-ntfs-dev@lfdr.de
Delivered-To: lists+linux-ntfs-dev@lfdr.de
Received: from lists.sourceforge.net (lists.sourceforge.net [216.105.38.7])
	by mail.lfdr.de (Postfix) with ESMTPS id 6CAA13E3C69
	for <lists+linux-ntfs-dev@lfdr.de>; Sun,  8 Aug 2021 21:06:36 +0200 (CEST)
Received: from [127.0.0.1] (helo=sfs-ml-1.v29.lw.sourceforge.com)
	by sfs-ml-1.v29.lw.sourceforge.com with esmtp (Exim 4.90_1)
	(envelope-from <linux-ntfs-dev-bounces@lists.sourceforge.net>)
	id 1mCo80-0004jE-Eb; Sun, 08 Aug 2021 19:06:32 +0000
Received: from [172.30.20.202] (helo=mx.sourceforge.net)
 by sfs-ml-2.v29.lw.sourceforge.com with esmtps
 (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256) (Exim 4.92.3)
 (envelope-from <pali@kernel.org>)
 id 1mClcG-0005ft-7O; Sun, 08 Aug 2021 16:25:36 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
 d=sourceforge.net; s=x; h=Content-Transfer-Encoding:Content-Type:MIME-Version
 :References:In-Reply-To:Message-Id:Date:Subject:To:From:Sender:Reply-To:Cc:
 Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:
 Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:
 List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=ieMIaRQYeJAWOERFx/SYiLztyPd6AysJLc1l/eN+zlE=; b=kaoMjeM67oyeddDVN+nX0tYaKF
 6/5r/28hteIquI7llIYY36Oz9nIHlcrRkA3UyUa2narxgx6/i9TXPiKoPGcq+tvSmbxP2soSxvBwB
 54YvvgPVB5CqE8mmnyuLG37bRBT/GkNISAVTby+Zoldti2cqMKuJaZEF6LWSxnGigrOA=;
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=sf.net; s=x
 ;
 h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:
 In-Reply-To:Message-Id:Date:Subject:To:From:Sender:Reply-To:Cc:Content-ID:
 Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc
 :Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:List-Subscribe:
 List-Post:List-Owner:List-Archive;
 bh=ieMIaRQYeJAWOERFx/SYiLztyPd6AysJLc1l/eN+zlE=; b=CTt4MSU7DIZjvTm4r4gZY63Cju
 d+FN55oHSWrJIxAdjCKyFGYetVbeIPUMdAIUuEOKFbu0Le4WMX/leM2ZhVPdx3KxIKfH8WOQa7Uip
 EIhq0F15Og8RqOByBI08S9GvbOJ+yEleDj388qjsa0i3ieTjf/N0ZJypB4g+usUreUDI=;
Received: from mail.kernel.org ([198.145.29.99])
 by sfi-mx-2.v28.lw.sourceforge.com with esmtps
 (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256) (Exim 4.92.3)
 id 1mClcE-0001wR-Os; Sun, 08 Aug 2021 16:25:36 +0000
Received: by mail.kernel.org (Postfix) with ESMTPSA id 6F3EE61167;
 Sun,  8 Aug 2021 16:25:22 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=k20201202; t=1628439922;
 bh=RhrZdv58wrpLoisOY8RK6pQHPOS7MXQ/Qzm4k+Axs/0=;
 h=From:To:Subject:Date:In-Reply-To:References:From;
 b=CofXhcoqL4ymQMtpBdn3B+KVHCCOv5olzacMdBa2xX2ovggh/yV1W0tCibTtMqEp4
 XBivMqwynQgqNsMOale8Lb904z/juyedkR6vM0u6WvZgy98G3o7N9PWPJdw6cCuklz
 kj3rxTpcAEmTnjqAluVAjps/KxdKcOWMgcB8BczWpXDFgfcO628qo0ZPDDRUOyOw8e
 Uqc9MJTQgIlUjpSA5j9vpov4M2QWPutbN3b5BbSbKlm/ftNuPj7KTXQns7wxnTREhL
 LCQ4ErOB7Au0T5xXjt8GfQQLCOKZNkch/W5XvX5e+o+JVz7Zc74MVShMEHHkKLkSbG
 JLk8miEAp6z+g==
Received: by pali.im (Postfix)
 id 3055A13DC; Sun,  8 Aug 2021 18:25:22 +0200 (CEST)
From: =?UTF-8?q?Pali=20Roh=C3=A1r?= <pali@kernel.org>
To: linux-fsdevel@vger.kernel.org, linux-ntfs-dev@lists.sourceforge.net,
 linux-cifs@vger.kernel.org, jfs-discussion@lists.sourceforge.net,
 linux-kernel@vger.kernel.org, Alexander Viro <viro@zeniv.linux.org.uk>,
 Jan Kara <jack@suse.cz>, OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>,
 "Theodore Y . Ts'o" <tytso@mit.edu>,
 Luis de Bethencourt <luisbg@kernel.org>,
 Salah Triki <salah.triki@gmail.com>,
 Andrew Morton <akpm@linux-foundation.org>,
 Dave Kleikamp <shaggy@kernel.org>, Anton Altaparmakov <anton@tuxera.com>,
 Pavel Machek <pavel@ucw.cz>,
 =?UTF-8?q?Marek=20Beh=C3=BAn?= <marek.behun@nic.cz>,
 Christoph Hellwig <hch@infradead.org>
Date: Sun,  8 Aug 2021 18:24:52 +0200
Message-Id: <20210808162453.1653-20-pali@kernel.org>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20210808162453.1653-1-pali@kernel.org>
References: <20210808162453.1653-1-pali@kernel.org>
MIME-Version: 1.0
X-Spam-Score: -0.8 (/)
X-Spam-Report: Spam Filtering performed by mx.sourceforge.net.
 See http://spamassassin.org/tag/ for more details.
 -0.0 SPF_PASS               SPF: sender matches SPF record
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.1 DKIM_VALID_AU Message has a valid DKIM or DK signature from author's
 domain
 -0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
 0.1 DKIM_SIGNED            Message has a DKIM or DK signature,
 not necessarily valid
 -0.7 DKIMWL_WL_HIGH         DKIMwl.org - High trust sender
 0.0 AWL AWL: Adjusted score from AWL reputation of From: address
X-Headers-End: 1mClcE-0001wR-Os
X-Mailman-Approved-At: Sun, 08 Aug 2021 19:06:29 +0000
Subject: [Linux-NTFS-Dev] [RFC PATCH 19/20] cifs: Remove usage of
 load_nls_default() calls
X-BeenThere: linux-ntfs-dev@lists.sourceforge.net
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: "Discussion related to Linux NTFS development."
 <linux-ntfs-dev.lists.sourceforge.net>
List-Unsubscribe: <https://lists.sourceforge.net/lists/options/linux-ntfs-dev>, 
 <mailto:linux-ntfs-dev-request@lists.sourceforge.net?subject=unsubscribe>
List-Archive: <http://sourceforge.net/mailarchive/forum.php?forum_name=linux-ntfs-dev>
List-Post: <mailto:linux-ntfs-dev@lists.sourceforge.net>
List-Help: <mailto:linux-ntfs-dev-request@lists.sourceforge.net?subject=help>
List-Subscribe: <https://lists.sourceforge.net/lists/listinfo/linux-ntfs-dev>, 
 <mailto:linux-ntfs-dev-request@lists.sourceforge.net?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-ntfs-dev-bounces@lists.sourceforge.net

Y2lmcyBmdW5jdGlvbnMgd2lsbCB1c2UgVVRGLTggZW5jb2Rpbmcgd2hlbiBubHNfdGFibGUgaXMg
c2V0IHRvIE5VTEwuIFNvCnRoZXJlIGlzIG5vIG5lZWQgdG8gbG9hZCAiZHVtbXkiIE5MUyB0YWJs
ZSBmb3Igc29tZSBvcGVyYXRpb25zLgoKT24gZmV3IHBsYWNlcyBpbiBkZnNfY2FjaGUgcmVwbGFj
ZSB1dGY4IG5scyBieSB1dGY4X3RvX3V0ZjMyKCkgZnVuY3Rpb24Kd2hpY2ggY29udmVydHMgVVRG
LTggc2VxdWVuY2UgdG8gdW5pY29kZSBjb2RlIHBvaW50cyAoc3RvcmVkIGFzIHR5cGUKdW5pY29k
ZV90KS4gVGhpcyBzaG91bGQgZml4IGhhbmRsaW5nIG9mIChVVEYtMTYpIENJRlMgcGF0aHMgd2l0
aCBVVEYtMTYKc3Vycm9nYXJlIHBhaXJzLCB3aGljaCB1dGY4IG5scyBtb2R1bGUgY2Fubm90IGhh
bmRsZS4KClNpZ25lZC1vZmYtYnk6IFBhbGkgUm9ow6FyIDxwYWxpQGtlcm5lbC5vcmc+Ci0tLQog
ZnMvY2lmcy9jaWZzc21iLmMgICB8ICA4ICsrLS0tLS0tCiBmcy9jaWZzL2Rmc19jYWNoZS5jIHwg
MjQgKysrKysrKystLS0tLS0tLS0tLS0tLS0tCiBmcy9jaWZzL3NtYjJwZHUuYyAgIHwgMTcgKysr
Ky0tLS0tLS0tLS0tLS0KIDMgZmlsZXMgY2hhbmdlZCwgMTQgaW5zZXJ0aW9ucygrKSwgMzUgZGVs
ZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZnMvY2lmcy9jaWZzc21iLmMgYi9mcy9jaWZzL2NpZnNz
bWIuYwppbmRleCA2NWQxYTY1YmZjMzcuLjhhMmViMzgwYzk3ZCAxMDA2NDQKLS0tIGEvZnMvY2lm
cy9jaWZzc21iLmMKKysrIGIvZnMvY2lmcy9jaWZzc21iLmMKQEAgLTExOSw3ICsxMTksNiBAQCBj
aWZzX3JlY29ubmVjdF90Y29uKHN0cnVjdCBjaWZzX3Rjb24gKnRjb24sIGludCBzbWJfY29tbWFu
ZCkKIAlpbnQgcmM7CiAJc3RydWN0IGNpZnNfc2VzICpzZXM7CiAJc3RydWN0IFRDUF9TZXJ2ZXJf
SW5mbyAqc2VydmVyOwotCXN0cnVjdCBubHNfdGFibGUgKm5sc19jb2RlcGFnZTsKIAlpbnQgcmV0
cmllczsKIAogCS8qCkBAIC0xODYsOCArMTg1LDYgQEAgY2lmc19yZWNvbm5lY3RfdGNvbihzdHJ1
Y3QgY2lmc190Y29uICp0Y29uLCBpbnQgc21iX2NvbW1hbmQpCiAJaWYgKCFzZXMtPm5lZWRfcmVj
b25uZWN0ICYmICF0Y29uLT5uZWVkX3JlY29ubmVjdCkKIAkJcmV0dXJuIDA7CiAKLQlubHNfY29k
ZXBhZ2UgPSBsb2FkX25sc19kZWZhdWx0KCk7Ci0KIAkvKgogCSAqIG5lZWQgdG8gcHJldmVudCBt
dWx0aXBsZSB0aHJlYWRzIHRyeWluZyB0byBzaW11bHRhbmVvdXNseQogCSAqIHJlY29ubmVjdCB0
aGUgc2FtZSBTTUIgc2Vzc2lvbgpAQCAtMjA3LDcgKzIwNCw3IEBAIGNpZnNfcmVjb25uZWN0X3Rj
b24oc3RydWN0IGNpZnNfdGNvbiAqdGNvbiwgaW50IHNtYl9jb21tYW5kKQogCiAJcmMgPSBjaWZz
X25lZ290aWF0ZV9wcm90b2NvbCgwLCBzZXMpOwogCWlmIChyYyA9PSAwICYmIHNlcy0+bmVlZF9y
ZWNvbm5lY3QpCi0JCXJjID0gY2lmc19zZXR1cF9zZXNzaW9uKDAsIHNlcywgbmxzX2NvZGVwYWdl
KTsKKwkJcmMgPSBjaWZzX3NldHVwX3Nlc3Npb24oMCwgc2VzLCBOVUxMKTsKIAogCS8qIGRvIHdl
IG5lZWQgdG8gcmVjb25uZWN0IHRjb24/ICovCiAJaWYgKHJjIHx8ICF0Y29uLT5uZWVkX3JlY29u
bmVjdCkgewpAQCAtMjE2LDcgKzIxMyw3IEBAIGNpZnNfcmVjb25uZWN0X3Rjb24oc3RydWN0IGNp
ZnNfdGNvbiAqdGNvbiwgaW50IHNtYl9jb21tYW5kKQogCX0KIAogCWNpZnNfbWFya19vcGVuX2Zp
bGVzX2ludmFsaWQodGNvbik7Ci0JcmMgPSBjaWZzX3RyZWVfY29ubmVjdCgwLCB0Y29uLCBubHNf
Y29kZXBhZ2UpOworCXJjID0gY2lmc190cmVlX2Nvbm5lY3QoMCwgdGNvbiwgTlVMTCk7CiAJbXV0
ZXhfdW5sb2NrKCZzZXMtPnNlc3Npb25fbXV0ZXgpOwogCWNpZnNfZGJnKEZZSSwgInJlY29ubmVj
dCB0Y29uIHJjID0gJWRcbiIsIHJjKTsKIApAQCAtMjUyLDcgKzI0OSw2IEBAIGNpZnNfcmVjb25u
ZWN0X3Rjb24oc3RydWN0IGNpZnNfdGNvbiAqdGNvbiwgaW50IHNtYl9jb21tYW5kKQogCQlyYyA9
IC1FQUdBSU47CiAJfQogCi0JdW5sb2FkX25scyhubHNfY29kZXBhZ2UpOwogCXJldHVybiByYzsK
IH0KIApkaWZmIC0tZ2l0IGEvZnMvY2lmcy9kZnNfY2FjaGUuYyBiL2ZzL2NpZnMvZGZzX2NhY2hl
LmMKaW5kZXggMjgzNzQ1NTkyODQ0Li4zYmE3NDhlNTllNjQgMTAwNjQ0Ci0tLSBhL2ZzL2NpZnMv
ZGZzX2NhY2hlLmMKKysrIGIvZnMvY2lmcy9kZnNfY2FjaGUuYwpAQCAtNjYsOCArNjYsNiBAQCBz
dGF0aWMgc3RydWN0IHdvcmtxdWV1ZV9zdHJ1Y3QgKmRmc2NhY2hlX3dxIF9fcmVhZF9tb3N0bHk7
CiBzdGF0aWMgaW50IGNhY2hlX3R0bDsKIHN0YXRpYyBERUZJTkVfU1BJTkxPQ0soY2FjaGVfdHRs
X2xvY2spOwogCi1zdGF0aWMgc3RydWN0IG5sc190YWJsZSAqY2FjaGVfY3A7Ci0KIC8qCiAgKiBO
dW1iZXIgb2YgZW50cmllcyBpbiB0aGUgY2FjaGUKICAqLwpAQCAtMTk0LDE0ICsxOTIsMTQgQEAg
Y2hhciAqZGZzX2NhY2hlX2Nhbm9uaWNhbF9wYXRoKGNvbnN0IGNoYXIgKnBhdGgsIGNvbnN0IHN0
cnVjdCBubHNfdGFibGUgKmNwLCBpbnQKIAlpZiAoIXBhdGggfHwgc3RybGVuKHBhdGgpIDwgMyB8
fCAoKnBhdGggIT0gJ1xcJyAmJiAqcGF0aCAhPSAnLycpKQogCQlyZXR1cm4gRVJSX1BUUigtRUlO
VkFMKTsKIAotCWlmICh1bmxpa2VseShzdHJjbXAoY3AtPmNoYXJzZXQsIGNhY2hlX2NwLT5jaGFy
c2V0KSkpIHsKKwlpZiAodW5saWtlbHkoY3ApKSB7CiAJCXRtcCA9IChjaGFyICopY2lmc19zdHJu
ZHVwX3RvX3V0ZjE2KHBhdGgsIHN0cmxlbihwYXRoKSwgJnBsZW4sIGNwLCByZW1hcCk7CiAJCWlm
ICghdG1wKSB7CiAJCQljaWZzX2RiZyhWRlMsICIlczogZmFpbGVkIHRvIGNvbnZlcnQgcGF0aCB0
byB1dGYxNlxuIiwgX19mdW5jX18pOwogCQkJcmV0dXJuIEVSUl9QVFIoLUVJTlZBTCk7CiAJCX0K
IAotCQlucGF0aCA9IGNpZnNfc3RybmR1cF9mcm9tX3V0ZjE2KHRtcCwgcGxlbiwgdHJ1ZSwgY2Fj
aGVfY3ApOworCQlucGF0aCA9IGNpZnNfc3RybmR1cF9mcm9tX3V0ZjE2KHRtcCwgcGxlbiwgdHJ1
ZSwgTlVMTCk7CiAJCWtmcmVlKHRtcCk7CiAKIAkJaWYgKCFucGF0aCkgewpAQCAtNDEzLDkgKzQx
MSw2IEBAIGludCBkZnNfY2FjaGVfaW5pdCh2b2lkKQogCQlJTklUX0hMSVNUX0hFQUQoJmNhY2hl
X2h0YWJsZVtpXSk7CiAKIAlhdG9taWNfc2V0KCZjYWNoZV9jb3VudCwgMCk7Ci0JY2FjaGVfY3Ag
PSBsb2FkX25scygidXRmOCIpOwotCWlmICghY2FjaGVfY3ApCi0JCWNhY2hlX2NwID0gbG9hZF9u
bHNfZGVmYXVsdCgpOwogCiAJY2lmc19kYmcoRllJLCAiJXM6IGluaXRpYWxpemVkIERGUyByZWZl
cnJhbCBjYWNoZVxuIiwgX19mdW5jX18pOwogCXJldHVybiAwOwpAQCAtNDI5LDExICs0MjQsMTEg
QEAgc3RhdGljIGludCBjYWNoZV9lbnRyeV9oYXNoKGNvbnN0IHZvaWQgKmRhdGEsIGludCBzaXpl
LCB1bnNpZ25lZCBpbnQgKmhhc2gpCiB7CiAJaW50IGksIGNsZW47CiAJY29uc3QgdW5zaWduZWQg
Y2hhciAqcyA9IGRhdGE7Ci0Jd2NoYXJfdCBjOworCXVuaWNvZGVfdCBjOwogCXVuc2lnbmVkIGlu
dCBoID0gMDsKIAogCWZvciAoaSA9IDA7IGkgPCBzaXplOyBpICs9IGNsZW4pIHsKLQkJY2xlbiA9
IGNhY2hlX2NwLT5jaGFyMnVuaSgmc1tpXSwgc2l6ZSAtIGksICZjKTsKKwkJY2xlbiA9IHV0Zjhf
dG9fdXRmMzIoJnNbaV0sIHNpemUgLSBpLCAmYyk7CiAJCWlmICh1bmxpa2VseShjbGVuIDwgMCkp
IHsKIAkJCWNpZnNfZGJnKFZGUywgIiVzOiBjYW4ndCBjb252ZXJ0IGNoYXJcbiIsIF9fZnVuY19f
KTsKIAkJCXJldHVybiBjbGVuOwpAQCAtNjIyLDE0ICs2MTcsMTQgQEAgc3RhdGljIGludCBhZGRf
Y2FjaGVfZW50cnlfbG9ja2VkKHN0cnVjdCBkZnNfaW5mbzNfcGFyYW0gKnJlZnMsIGludCBudW1y
ZWZzKQogc3RhdGljIGJvb2wgZGZzX3BhdGhfZXF1YWwoY29uc3QgY2hhciAqczEsIGludCBsZW4x
LCBjb25zdCBjaGFyICpzMiwgaW50IGxlbjIpCiB7CiAJaW50IGksIGwxLCBsMjsKLQl3Y2hhcl90
IGMxLCBjMjsKKwl1bmljb2RlX3QgYzEsIGMyOwogCiAJaWYgKGxlbjEgIT0gbGVuMikKIAkJcmV0
dXJuIGZhbHNlOwogCiAJZm9yIChpID0gMDsgaSA8IGxlbjE7IGkgKz0gbDEpIHsKLQkJbDEgPSBj
YWNoZV9jcC0+Y2hhcjJ1bmkoJnMxW2ldLCBsZW4xIC0gaSwgJmMxKTsKLQkJbDIgPSBjYWNoZV9j
cC0+Y2hhcjJ1bmkoJnMyW2ldLCBsZW4yIC0gaSwgJmMyKTsKKwkJbDEgPSB1dGY4X3RvX3V0ZjMy
KCZzMVtpXSwgbGVuMSAtIGksICZjMSk7CisJCWwyID0gdXRmOF90b191dGYzMigmczJbaV0sIGxl
bjIgLSBpLCAmYzIpOwogCQlpZiAodW5saWtlbHkobDEgPCAwICYmIGwyIDwgMCkpIHsKIAkJCWlm
IChzMVtpXSAhPSBzMltpXSkKIAkJCQlyZXR1cm4gZmFsc2U7CkBAIC03MTksNyArNzE0LDYgQEAg
c3RhdGljIHN0cnVjdCBjYWNoZV9lbnRyeSAqbG9va3VwX2NhY2hlX2VudHJ5KGNvbnN0IGNoYXIg
KnBhdGgpCiB2b2lkIGRmc19jYWNoZV9kZXN0cm95KHZvaWQpCiB7CiAJY2FuY2VsX2RlbGF5ZWRf
d29ya19zeW5jKCZyZWZyZXNoX3Rhc2spOwotCXVubG9hZF9ubHMoY2FjaGVfY3ApOwogCWZyZWVf
bW91bnRfZ3JvdXBfbGlzdCgpOwogCWZsdXNoX2NhY2hlX2VudHMoKTsKIAlrbWVtX2NhY2hlX2Rl
c3Ryb3koY2FjaGVfc2xhYik7CkBAIC03NjcsMTAgKzc2MSw4IEBAIHN0YXRpYyBpbnQgZ2V0X2Rm
c19yZWZlcnJhbChjb25zdCB1bnNpZ25lZCBpbnQgeGlkLCBzdHJ1Y3QgY2lmc19zZXMgKnNlcywg
Y29uc3QKIAogCWlmICghc2VzIHx8ICFzZXMtPnNlcnZlciB8fCAhc2VzLT5zZXJ2ZXItPm9wcy0+
Z2V0X2Rmc19yZWZlcikKIAkJcmV0dXJuIC1FT1BOT1RTVVBQOwotCWlmICh1bmxpa2VseSghY2Fj
aGVfY3ApKQotCQlyZXR1cm4gLUVJTlZBTDsKIAotCXJjID0gIHNlcy0+c2VydmVyLT5vcHMtPmdl
dF9kZnNfcmVmZXIoeGlkLCBzZXMsIHBhdGgsIHJlZnMsIG51bXJlZnMsIGNhY2hlX2NwLAorCXJj
ID0gIHNlcy0+c2VydmVyLT5vcHMtPmdldF9kZnNfcmVmZXIoeGlkLCBzZXMsIHBhdGgsIHJlZnMs
IG51bXJlZnMsIE5VTEwsCiAJCQkJCSAgICAgIE5PX01BUF9VTklfUlNWRCk7CiAJaWYgKCFyYykg
ewogCQlzdHJ1Y3QgZGZzX2luZm8zX3BhcmFtICpyZWYgPSAqcmVmczsKZGlmZiAtLWdpdCBhL2Zz
L2NpZnMvc21iMnBkdS5jIGIvZnMvY2lmcy9zbWIycGR1LmMKaW5kZXggNzgxZDE0ZTVmMmFmLi5i
NDRmOTFkZDI3ODIgMTAwNjQ0Ci0tLSBhL2ZzL2NpZnMvc21iMnBkdS5jCisrKyBiL2ZzL2NpZnMv
c21iMnBkdS5jCkBAIC0xNDUsNyArMTQ1LDYgQEAgc21iMl9yZWNvbm5lY3QoX19sZTE2IHNtYjJf
Y29tbWFuZCwgc3RydWN0IGNpZnNfdGNvbiAqdGNvbiwKIAkgICAgICAgc3RydWN0IFRDUF9TZXJ2
ZXJfSW5mbyAqc2VydmVyKQogewogCWludCByYzsKLQlzdHJ1Y3QgbmxzX3RhYmxlICpubHNfY29k
ZXBhZ2U7CiAJc3RydWN0IGNpZnNfc2VzICpzZXM7CiAJaW50IHJldHJpZXM7CiAKQEAgLTIzMyw4
ICsyMzIsNiBAQCBzbWIyX3JlY29ubmVjdChfX2xlMTYgc21iMl9jb21tYW5kLCBzdHJ1Y3QgY2lm
c190Y29uICp0Y29uLAogCWlmICghdGNvbi0+c2VzLT5uZWVkX3JlY29ubmVjdCAmJiAhdGNvbi0+
bmVlZF9yZWNvbm5lY3QpCiAJCXJldHVybiAwOwogCi0JbmxzX2NvZGVwYWdlID0gbG9hZF9ubHNf
ZGVmYXVsdCgpOwotCiAJLyoKIAkgKiBuZWVkIHRvIHByZXZlbnQgbXVsdGlwbGUgdGhyZWFkcyB0
cnlpbmcgdG8gc2ltdWx0YW5lb3VzbHkgcmVjb25uZWN0CiAJICogdGhlIHNhbWUgU01CIHNlc3Np
b24KQEAgLTI2Miw3ICsyNTksNyBAQCBzbWIyX3JlY29ubmVjdChfX2xlMTYgc21iMl9jb21tYW5k
LCBzdHJ1Y3QgY2lmc190Y29uICp0Y29uLAogCiAJcmMgPSBjaWZzX25lZ290aWF0ZV9wcm90b2Nv
bCgwLCB0Y29uLT5zZXMpOwogCWlmICghcmMgJiYgdGNvbi0+c2VzLT5uZWVkX3JlY29ubmVjdCkg
ewotCQlyYyA9IGNpZnNfc2V0dXBfc2Vzc2lvbigwLCB0Y29uLT5zZXMsIG5sc19jb2RlcGFnZSk7
CisJCXJjID0gY2lmc19zZXR1cF9zZXNzaW9uKDAsIHRjb24tPnNlcywgTlVMTCk7CiAJCWlmICgo
cmMgPT0gLUVBQ0NFUykgJiYgIXRjb24tPnJldHJ5KSB7CiAJCQlyYyA9IC1FSE9TVERPV047CiAJ
CQlzZXMtPmJpbmRpbmcgPSBmYWxzZTsKQEAgLTI4Niw3ICsyODMsNyBAQCBzbWIyX3JlY29ubmVj
dChfX2xlMTYgc21iMl9jb21tYW5kLCBzdHJ1Y3QgY2lmc190Y29uICp0Y29uLAogCWlmICh0Y29u
LT51c2VfcGVyc2lzdGVudCkKIAkJdGNvbi0+bmVlZF9yZW9wZW5fZmlsZXMgPSB0cnVlOwogCi0J
cmMgPSBjaWZzX3RyZWVfY29ubmVjdCgwLCB0Y29uLCBubHNfY29kZXBhZ2UpOworCXJjID0gY2lm
c190cmVlX2Nvbm5lY3QoMCwgdGNvbiwgTlVMTCk7CiAJbXV0ZXhfdW5sb2NrKCZ0Y29uLT5zZXMt
PnNlc3Npb25fbXV0ZXgpOwogCiAJY2lmc19kYmcoRllJLCAicmVjb25uZWN0IHRjb24gcmMgPSAl
ZFxuIiwgcmMpOwpAQCAtMzIyLDcgKzMxOSw2IEBAIHNtYjJfcmVjb25uZWN0KF9fbGUxNiBzbWIy
X2NvbW1hbmQsIHN0cnVjdCBjaWZzX3Rjb24gKnRjb24sCiAJCXJjID0gLUVBR0FJTjsKIAl9CiBm
YWlsZWQ6Ci0JdW5sb2FkX25scyhubHNfY29kZXBhZ2UpOwogCXJldHVybiByYzsKIH0KIApAQCAt
NDgxLDEyICs0NzcsMTAgQEAgYnVpbGRfZW5jcnlwdF9jdHh0KHN0cnVjdCBzbWIyX2VuY3J5cHRp
b25fbmVnX2NvbnRleHQgKnBuZWdfY3R4dCkKIHN0YXRpYyB1bnNpZ25lZCBpbnQKIGJ1aWxkX25l
dG5hbWVfY3R4dChzdHJ1Y3Qgc21iMl9uZXRuYW1lX25lZ19jb250ZXh0ICpwbmVnX2N0eHQsIGNo
YXIgKmhvc3RuYW1lKQogewotCXN0cnVjdCBubHNfdGFibGUgKmNwID0gbG9hZF9ubHNfZGVmYXVs
dCgpOwotCiAJcG5lZ19jdHh0LT5Db250ZXh0VHlwZSA9IFNNQjJfTkVUTkFNRV9ORUdPVElBVEVf
Q09OVEVYVF9JRDsKIAogCS8qIGNvcHkgdXAgdG8gbWF4IG9mIGZpcnN0IDEwMCBieXRlcyBvZiBz
ZXJ2ZXIgbmFtZSB0byBOZXROYW1lIGZpZWxkICovCi0JcG5lZ19jdHh0LT5EYXRhTGVuZ3RoID0g
Y3B1X3RvX2xlMTYoMiAqIGNpZnNfc3RydG9VVEYxNihwbmVnX2N0eHQtPk5ldE5hbWUsIGhvc3Ru
YW1lLCAxMDAsIGNwKSk7CisJcG5lZ19jdHh0LT5EYXRhTGVuZ3RoID0gY3B1X3RvX2xlMTYoMiAq
IGNpZnNfc3RydG9VVEYxNihwbmVnX2N0eHQtPk5ldE5hbWUsIGhvc3RuYW1lLCAxMDAsIE5VTEwp
KTsKIAkvKiBjb250ZXh0IHNpemUgaXMgRGF0YUxlbmd0aCArIG1pbmltYWwgc21iMl9uZWdfY29u
dGV4dCAqLwogCXJldHVybiBESVZfUk9VTkRfVVAobGUxNl90b19jcHUocG5lZ19jdHh0LT5EYXRh
TGVuZ3RoKSArCiAJCQlzaXplb2Yoc3RydWN0IHNtYjJfbmVnX2NvbnRleHQpLCA4KSAqIDg7CkBA
IC0yNDk4LDcgKzI0OTIsNiBAQCBhbGxvY19wYXRoX3dpdGhfdHJlZV9wcmVmaXgoX19sZTE2ICoq
b3V0X3BhdGgsIGludCAqb3V0X3NpemUsIGludCAqb3V0X2xlbiwKIAkJCSAgICBjb25zdCBjaGFy
ICp0cmVlbmFtZSwgY29uc3QgX19sZTE2ICpwYXRoKQogewogCWludCB0cmVlbmFtZV9sZW4sIHBh
dGhfbGVuOwotCXN0cnVjdCBubHNfdGFibGUgKmNwOwogCWNvbnN0IF9fbGUxNiBzZXBbXSA9IHtj
cHVfdG9fbGUxNignXFwnKSwgY3B1X3RvX2xlMTYoMHgwMDAwKX07CiAKIAkvKgpAQCAtMjUyOSwx
MSArMjUyMiw5IEBAIGFsbG9jX3BhdGhfd2l0aF90cmVlX3ByZWZpeChfX2xlMTYgKipvdXRfcGF0
aCwgaW50ICpvdXRfc2l6ZSwgaW50ICpvdXRfbGVuLAogCWlmICghKm91dF9wYXRoKQogCQlyZXR1
cm4gLUVOT01FTTsKIAotCWNwID0gbG9hZF9ubHNfZGVmYXVsdCgpOwotCWNpZnNfc3RydG9VVEYx
Nigqb3V0X3BhdGgsIHRyZWVuYW1lLCB0cmVlbmFtZV9sZW4sIGNwKTsKKwljaWZzX3N0cnRvVVRG
MTYoKm91dF9wYXRoLCB0cmVlbmFtZSwgdHJlZW5hbWVfbGVuLCBOVUxMKTsKIAlVbmlTdHJjYXQo
Km91dF9wYXRoLCBzZXApOwogCVVuaVN0cmNhdCgqb3V0X3BhdGgsIHBhdGgpOwotCXVubG9hZF9u
bHMoY3ApOwogCiAJcmV0dXJuIDA7CiB9Ci0tIAoyLjIwLjEKCgoKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGludXgtTlRGUy1EZXYgbWFpbGluZyBsaXN0
CkxpbnV4LU5URlMtRGV2QGxpc3RzLnNvdXJjZWZvcmdlLm5ldApodHRwczovL2xpc3RzLnNvdXJj
ZWZvcmdlLm5ldC9saXN0cy9saXN0aW5mby9saW51eC1udGZzLWRldgo=
